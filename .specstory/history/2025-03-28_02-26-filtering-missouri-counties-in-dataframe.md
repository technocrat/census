<!-- Generated by SpecStory -->

# Filtering Missouri Counties in DataFrame (2025-03-27 19:26:10)

_**User**_

I need help keeping the ms_basin_mo and lower_ms_mo in df while excluding all other geoids in MO from df

---

_**Assistant**_

Based on the context and your query, you want to keep specific Missouri counties (those in the Mississippi basin and lower Mississippi) while excluding other Missouri counties from your dataframe. I'll help you create a filter for this.

Since we're working with Julia and dealing with county-level data, here's how we can filter the dataframe:

```julia
# Keep MS basin and lower MS counties in MO while excluding other MO counties
df = filter(row -> begin
    # Keep all non-MO counties
    !startswith(row.geoid, "29") || # 29 is MO state FIPS code
    # Keep specific MO counties we want (ms_basin_mo and lower_ms_mo)
    row.geoid in ms_basin_mo || 
    row.geoid in lower_ms_mo
end, df)
```

This code will:
1. Keep all counties that don't start with "29" (non-Missouri counties)
2. Keep Missouri counties that are in either `ms_basin_mo` or `lower_ms_mo` sets
3. Remove all other Missouri counties

Note: This assumes that:
- `ms_basin_mo` and `lower_ms_mo` are already defined collections (like vectors or sets) containing the geoids of the Missouri counties you want to keep
- Your dataframe `df` has a column named `geoid` containing FIPS codes
- Missouri's state FIPS code "29" is used as a prefix in the county FIPS codes

If you need help defining `ms_basin_mo` and `lower_ms_mo`, or if you're working with a different structure, please let me know and I can adjust the solution accordingly.

Also, if you're working with the database directly, we could alternatively write this as a SQL query. Would you like to see that approach as well?

---



---

